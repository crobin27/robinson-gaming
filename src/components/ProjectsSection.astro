---
import "../styles/projects-section.css";
// ProjectsSection.astro
const { id } = Astro.props;
---

<section id={id} class="projects-section">
  <!-- Background Image -->
  <div class="projects-background">
    <div class="container projects-content">
      <h2 class="projects-title">Projects</h2>

      <!-- Project Placards -->
      <div class="project-placards">
        <!-- Project 1 -->
        <div class="project-card">
          <img
            src="/images/projects/project-1.webp"
            alt="ESP32-CAM trail camera project in a natural setting"
            class="project-image"
          />
          <a
            href="https://github.com/crobin27/trail-cam-esp32"
            target="_blank"
            class="learn-more-link"
            aria-label="Learn more about ESP32-CAM trail camera project"
          >
            <img
              src="/images/projects/learn-more.webp"
              alt="Learn more about this project"
              class="learn-more-button"
            />
          </a>
        </div>

        <!-- Project 2 -->
        <div class="project-card">
          <img
            src="/images/projects/project-2.webp"
            alt="Screenshot of Word Match Tiles mobile game"
            class="project-image"
          />
          <a
            href="https://github.com/crobin27/WordMatchTiles-Public"
            target="_blank"
            class="learn-more-link"
            aria-label="Learn more about Word Match Tiles game project"
          >
            <img
              src="/images/projects/learn-more.webp"
              alt="Learn more about this project"
              class="learn-more-button"
            />
          </a>
        </div>

        <!-- Project 3 -->
        <div class="project-card">
          <img
            src="/images/projects/project-3.webp"
            alt="Preview of Robinson Gaming portfolio website layout"
            class="project-image"
          />
          <a
            href="https://github.com/crobin27/robinson-gaming"
            target="_blank"
            class="learn-more-link"
            aria-label="Learn more about the Robinson Gaming portfolio website project"
          >
            <img
              src="/images/projects/learn-more.webp"
              alt="Learn more about this project"
              class="learn-more-button"
            />
          </a>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const projectCards = document.querySelectorAll(".project-card");

    const observerOptions = {
      threshold: 0.1, // Trigger when 10% of the card is in view
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach((entry, index) => {
        if (entry.isIntersecting) {
          entry.target.classList.add("visible");
          entry.target.setAttribute(
            "style",
            `animation-delay: ${index * 0.2}s`,
          ); // Stagger effect
          observer.unobserve(entry.target); // Stop observing once animation is applied
        }
      });
    }, observerOptions);

    projectCards.forEach((card) => observer.observe(card));
  });
</script>
